<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Leap Motion C API: Using LeapC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="leapmotion-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Leap Motion C API
   &#160;<span id="projectnumber">3.1</span>
   </div>
   <div id="projectbrief">The API to the LeapC library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>LeapC</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li class="current"><a href="pages.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00024.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using LeapC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#messagepump">Getting Tracking Frames and Other Event Messages</a></li>
<li class="level1"><a href="#interpolatingframes">Interpolating Frames</a></li>
<li class="level1"><a href="#devices">Reading Device Properties</a></li>
<li class="level1"><a href="#policies">Controlling Policies</a><ul><li class="level2"><a href="#getsetpolicies">Reading and writing policies</a></li>
</ul>
</li>
<li class="level1"><a href="#config">Getting and Setting Configuration Values</a><ul><li class="level2"><a href="#getconfig">Reading a confg setting</a></li>
<li class="level2"><a href="#setconfig">Writing a config setting</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>The typical tasks a client application performs to get tracking and status information include:</p>
<ul>
<li>Setting up a message pump to handle tracking and status events</li>
<li>Requesting images.</li>
<li>Getting and setting policy settings.</li>
<li>Getting and setting configuration settings.</li>
<li>Synchronizing app and Leap Motion clocks and getting interpolated frames.</li>
<li>Closing the connection.</li>
</ul>
<h1><a class="anchor" id="messagepump"></a>
Getting Tracking Frames and Other Event Messages</h1>
<p>You can use a message pump to efficiently monitor the LeapC message queue. The message queue provides tracking data and status information from the Leap Motion service.</p>
<p>A typical message pump is a function that runs in its own thread and calls <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> in a tight loop:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;void serviceMessageLoop(){</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  eLeapRS result;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  LEAP_CONNECTION_MESSAGE msg;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  while(_isRunning){</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    unsigned int timeout = 1000;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    result = LeapPollConnection(connectionHandle, timeout, &amp;msg);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    //Handle message</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div>
</div><!-- fragment --><p>The types of messages that can be returned by <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> are defined in the eLeapEventType enumeration. Your application should handle each event type appropriately and synchronize any data that needs to be used by other threads. <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> blocks until a message is available or until the specified timeout period has elapsed.</p>
<p>To start the message pump, you must first open a connection and start the message pump thread:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LEAP_CONNECTION* OpenConnection(){</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;  eLeapRS result = LeapCreateConnection(NULL, &amp;connectionHandle);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  if(result == eLeapRS_Success){</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    result = LeapOpenConnection(connectionHandle);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    if(result == eLeapRS_Success){</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      _isRunning = true;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      pthread_create(&amp;pollingThread, NULL, serviceMessageLoop, NULL);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;  }</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;  return &amp;connectionHandle;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;}</div>
</div><!-- fragment --><p>The <a class="el" href="a00029.html#a00042" title="A handle to the Leap connection object. ">LEAP_CONNECTION</a> struct returned by <a class="el" href="a00036.html#ga5bcc831cf503136f45dde040f29973b5" title="Creates a new LEAP_CONNECTION object. ">LeapCreateConnection()</a> becomes your handle for referencing this connection in future LeapC API calls. (You can maintain more than one connection, but typically there is no reason to do so.) Pass a NULL value for the <a class="el" href="a00029.html#a00043" title="Specifies the configuration for a connection. ">LEAP_CONNECTION_CONFIG</a> struct. There aren't currently any config options to set.</p>
<p><a class="el" href="a00036.html#ga49a90e9ca6d880d59fa3f1813689f7fd" title="Opens a connection to the service. ">LeapOpenConnection()</a> performs client-side verification and starts any operations needed to connect to the service. However, any operations that may block are deferred until the first call to <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a>.</p>
<p><b>Note:</b> you do not need to open a device to get tracking data. The device-related functions are only needed to get device properties or to change device state. See <a class="el" href="a00024.html#devices">Reading Device Properties</a>.</p>
<p>See the <a class="el" href="a00008.html">Callback Example</a>.</p>
<h1><a class="anchor" id="interpolatingframes"></a>
Interpolating Frames</h1>
<p>Instead of taking frames at measured at whatever rate the Leap Motion device happens to be producing them, you can request each frame at a particular time. LeapC will then interpolate the nearest measured frames to synthesize a frame at the desired time. In general, requesting frames further in the past will provide improve the perception of smoothness in the tracking data, but at a cost of increased latency. Conversely, requesting frames with a shorter delay will improve perceived responsiveness, but at a cost of increased jitteryness. You should tune the value as best suits your application; if you use the same code on desktop and mobile platforms (when mobile is supported), you will probably need different delay values for each.</p>
<p>A timestamp that is more recent than the timestamp most recently returned by <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> (e.g. for a tracking or image complete event) is considered to be in the future. If an interpolated frame is requested for a timestamp in the future, LeapC will use extrapolation instead of interpolation. If the same call was delayed so that the same timestamp value is no longer in the future, LeapC will choose to interpolate instead of extrapolate.</p>
<p>The <a class="el" href="a00036.html#ga4ef33708af974ecd618ad9784aa38161" title="Samples the universal clock used by the system to timestamp image and tracking frames. ">LeapGetNow()</a> function returns the current value of the clock used to generate frame timestamps. On Windows, this value is equal to QueryPerformanceCounter divided by QueryPerformanceFrequency, represented in microseconds. On all other platforms, it is the time since epoch of std::chrono::high_resolution_clock::now(), in microseconds. If your application time is derived from the same source as <a class="el" href="a00036.html#ga4ef33708af974ecd618ad9784aa38161" title="Samples the universal clock used by the system to timestamp image and tracking frames. ">LeapGetNow()</a>, you can calculate the desired frame timestamps directly and do not need to use the <a class="el" href="a00029.html#a00039" title="An opaque clock rebase state structure. ">LEAP_CLOCK_REBASER</a> object.</p>
<p>To get interpolated frames:</p>
<ol type="1">
<li>Open the connection.</li>
<li>Call <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> at least once to complete opening the connection.</li>
<li>Create a <a class="el" href="a00029.html#a00039" title="An opaque clock rebase state structure. ">LEAP_CLOCK_REBASER</a> struct.</li>
<li>Pass this struct to <a class="el" href="a00036.html#ga95c0d7e31b8337021c41f13d4ef6849b" title="Initializes a new Leap clock-rebaser handle object. ">LeapCreateClockRebaser()</a>, which initializes the struct.</li>
<li>Every time you render a frame of graphics, call <a class="el" href="a00036.html#gac111f105a4b418e1f7ed08a1b74c8bca" title="Updates the relationship between the Leap Motion clock and the user clock. ">LeapUpdateRebase()</a> to synchronize the Leap Motion and application clocks. The clocks will drift apart rapidly, otherwise.</li>
<li>Translate the target timestamp of the interpolated frame by passing the application time to <a class="el" href="a00036.html#gadd9e1af6480d7948b77ccf40fbca337a" title="Computes the Leap Motion clock corresponding to a specified application clock value. ">LeapRebaseClock()</a>. LeapC writes the corresponding Leap clock time to the pLeapClock parameter.</li>
<li>Call <a class="el" href="a00036.html#gae680ca44ccf77a25c4a61f9ae1a311bc" title="Retrieves the number of bytes required to allocate an interpolated frame at the specified time...">LeapGetFrameSize()</a> to calculate the size of the buffer needed to require the tracking data at the desired point in time. (Frame size varies with the number of hands in view.)</li>
<li>Allocate a buffer of the required size.</li>
<li>Call <a class="el" href="a00036.html#ga7cbdc29069fbcd6aca1a16989722e85c" title="Constructs a frame at the specified timestamp by interpolating between measured frames. ">LeapInterpolateFrame()</a>, passing in the frame time and your buffer. LeapC writes the frame data to your buffer. This buffer can be treated as a <a class="el" href="a00029.html#a00069" title="A snapshot, or frame of data, containing the tracking data for a single moment in time...">LEAP_TRACKING_EVENT</a> object to access the tracking data.</li>
<li>Continue calling <a class="el" href="a00036.html#gac111f105a4b418e1f7ed08a1b74c8bca" title="Updates the relationship between the Leap Motion clock and the user clock. ">LeapUpdateRebase()</a> and <a class="el" href="a00036.html#ga7cbdc29069fbcd6aca1a16989722e85c" title="Constructs a frame at the specified timestamp by interpolating between measured frames. ">LeapInterpolateFrame()</a> at your application frame rate.</li>
</ol>
<p>Note that if you have an alternative means of converting your local timestamp units into the same clock domain as that used by <a class="el" href="a00036.html#ga4ef33708af974ecd618ad9784aa38161" title="Samples the universal clock used by the system to timestamp image and tracking frames. ">LeapGetNow()</a>, you do not need to use the clock rebasing functions and can call <a class="el" href="a00036.html#ga7cbdc29069fbcd6aca1a16989722e85c" title="Constructs a frame at the specified timestamp by interpolating between measured frames. ">LeapInterpolateFrame()</a> using the converted timestamp directly.</p>
<p>When getting interpolated frames, you can safely ignore tracking messages from <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> &ndash; but you should still service the message loop to get status and image completion messages.</p>
<p>See the <a class="el" href="a00012.html">Interpolated Frames Example</a>.</p>
<h1><a class="anchor" id="devices"></a>
Reading Device Properties</h1>
<p>To read the properties of a device, you must get the list of known devices from LeapC using <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a>. You can then get the specific properties of the devices in the returned list using <a class="el" href="a00036.html#ga992f1420318c3569a6a0f3ceaac43754" title="Opens a device reference and retrieves a handle to the device. ">LeapOpenDevice()</a> and <a class="el" href="a00036.html#gafae71b1c2b532c22cbfcf8a49df7ed3a" title="Gets device properties. ">LeapGetDeviceInfo()</a>.</p>
<p>you must first open it with <a class="el" href="a00036.html#ga992f1420318c3569a6a0f3ceaac43754" title="Opens a device reference and retrieves a handle to the device. ">LeapOpenDevice()</a>. For that you need a <a class="el" href="a00029.html#a00052" title="A reference to a Leap device. ">LEAP_DEVICE_REF</a> struct, which you can get from <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a>. However, you must pass an array to <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a> to receive the device reference structs. So first, you must get the number of attached devices. You get the device count by calling <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a> passing in a NULL pointer in place of the device array.</p>
<p>To get device information:</p>
<ol type="1">
<li>Open the connection.</li>
<li>Call <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> at least once to complete opening the connection.</li>
<li>Get the device count by calling <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a>, passing a NULL pointer instead of an array of device reference structs. LeapC writes the device count to the pnArray parameter.</li>
<li>Create an array of <a class="el" href="a00029.html#a00052" title="A reference to a Leap device. ">LEAP_DEVICE_REF</a> structs large enough to hold the number of attached devices.</li>
<li><p class="startli">Call <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a> again, passing in the correct size array and setting pnArray to the number of elements in your array. LeapC fills in the device reference struct for each attached device and updates pnArray to the number of records it actually wrote.</p>
<p class="startli">Because <a class="el" href="a00036.html#ga93640c45298cc4d756e4b51c890e0a68" title="Retrieves a list of Leap Motion devices currently attached to the system. ">LeapGetDeviceList()</a> does not block, the returned list contains references for any devices known to LeapC at the time of the call. This local list can be different than the list of devices know to the Leap Motion service.</p>
</li>
</ol>
<p>Once you have a <a class="el" href="a00029.html#a00052" title="A reference to a Leap device. ">LEAP_DEVICE_REF</a> struct for a device, you can read its properties:</p>
<ol type="1">
<li>Create a <a class="el" href="a00029.html#a00048" title="A handle to a Leap device object. ">LEAP_DEVICE</a> struct, which will become your device handle.</li>
<li>Call <a class="el" href="a00036.html#ga992f1420318c3569a6a0f3ceaac43754" title="Opens a device reference and retrieves a handle to the device. ">LeapOpenDevice()</a>, passing in the <a class="el" href="a00029.html#a00052" title="A reference to a Leap device. ">LEAP_DEVICE_REF</a> and <a class="el" href="a00029.html#a00048" title="A handle to a Leap device object. ">LEAP_DEVICE</a> structs.</li>
<li>Create a <a class="el" href="a00029.html#a00051" title="Properties of a Leap device. ">LEAP_DEVICE_INFO</a> struct.</li>
<li>Allocate a buffer large enough to hold the serial number string.</li>
<li>Call <a class="el" href="a00036.html#gafae71b1c2b532c22cbfcf8a49df7ed3a" title="Gets device properties. ">LeapGetDeviceInfo()</a> to fill in the device info struct.</li>
<li>If the serial number buffer is too small, then <a class="el" href="a00036.html#gafae71b1c2b532c22cbfcf8a49df7ed3a" title="Gets device properties. ">LeapGetDeviceInfo()</a> returns a value of eLeapRS_InsufficientBuffer. It also sets the <a class="el" href="a00029.html#a37bb6f973484389335ba8fc11deef34f" title="The required length of the serial number char buffer. ">LEAP_DEVICE_INFO::serial_length</a> field to the required buffer lenght. You can use this value to allocate a properly sized buffer and call the function again.</li>
<li>Call <a class="el" href="a00036.html#gab272a3771f067d7a9d34461d557a7907" title="Closes a device handle previously opened with LeapOpenDevice. ">LeapCloseDevice()</a> when done.</li>
</ol>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;LEAP_DEVICE_INFO deviceProperties;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;deviceProperties.serial_length = 1;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;deviceProperties.serial = malloc(deviceProperties.serial_length);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;result = LeapGetDeviceInfo(deviceHandle, &amp;deviceProperties);</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;if(result == eLeapRS_InsufficientBuffer){</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;  free(deviceProperties.serial);</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;  deviceProperties.serial = malloc(deviceProperties.serial_length);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;  result = LeapGetDeviceInfo(deviceHandle, &amp;deviceProperties);</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;}</div>
</div><!-- fragment --><h1><a class="anchor" id="policies"></a>
Controlling Policies</h1>
<p>Policies control whether certain features should be used by an application. Generally, these features affect general usability or change service behavior that will affect all applications on a system.</p>
<p>See <a class="el" href="a00002.html#policy_concept">Policy</a> for a description of the current policies.</p>
<h2><a class="anchor" id="getsetpolicies"></a>
Reading and writing policies</h2>
<p>To get and set policies:</p>
<ol type="1">
<li>Open the connection.</li>
<li>Call <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> at least once.</li>
<li>Combine the flags that you want to set by bitwise ANDing elements of the eLeapPolicyFlag enumeration.</li>
<li>Likewise, combine the flags that you want to clear by bitwise ANDing elements of the eLeapPolicyFlag enumeration.</li>
<li>Call <a class="el" href="a00036.html#gab57050814a0763ec07ed088e3d2de7f2" title="Sets or clears one or more policy flags. ">LeapSetPolicyFlags()</a>, passing in your set and clear policy combinations.</li>
<li>When the policy change is processed by the service, LeapC adds a <a class="el" href="a00029.html#a00065" title="The response from a request to get or set a policy. ">LEAP_POLICY_EVENT</a> message to the queue. You can compare <a class="el" href="a00029.html#a15e97d53b785691e29631b22a4b70119" title="A bitfield containing the policies effective at the time the policy event was processed. ">LEAP_POLICY_EVENT::current_policy</a> with the desired policy to verify that the policy change was "approved."</li>
</ol>
<p>To read the current policies without making changes, set both the set and the clear parameters to 0 when calling <a class="el" href="a00036.html#gab57050814a0763ec07ed088e3d2de7f2" title="Sets or clears one or more policy flags. ">LeapSetPolicyFlags()</a>. This will generate a <a class="el" href="a00029.html#a00065" title="The response from a request to get or set a policy. ">LEAP_POLICY_EVENT</a> message containing the current policies.</p>
<p>Note that the other Leap Motion language bindings support a slightly different set of polcies and are based on libraries that enforce these policies differently. For more informations, see <a href="https://developer.leapmotion.com/documentation/cpp/devguide/Leap_Policies.html">https://developer.leapmotion.com/documentation/cpp/devguide/Leap_Policies.html</a>.</p>
<h1><a class="anchor" id="config"></a>
Getting and Setting Configuration Values</h1>
<p>The Leap Motion service has several configuration settings. A few are useful to individual applications. For a description of these settings, see <a class="el" href="a00004.html">Configuration</a>.</p>
<h2><a class="anchor" id="getconfig"></a>
Reading a confg setting</h2>
<p>To read a config value:</p>
<ol type="1">
<li>Open the connection.</li>
<li>Call <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> at least once.</li>
<li>Call <a class="el" href="a00036.html#ga6fdd92015369e64bc8d09d1cbc77fb46" title="Requests the current value of a service configuration setting. ">LeapRequestConfigValue()</a>, providing the name of the desired config value as a string (char*). LeapC provides a request ID value that you can use to correlate the response to the request.</li>
<li>Continue calling <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> to service the message loop.</li>
<li>When available, a <a class="el" href="a00029.html#a00041" title="Contains the response to a configuration value request. ">LEAP_CONFIG_RESPONSE_EVENT</a> message is returned from the message loop. The value is returned in a variant structure that defines a union of the different supported data types. Use the <a class="el" href="a00029.html#a9ac92819915d543693e306cda04689e0" title="The active data type in this instance. ">LEAP_VARIANT::type</a> field to decide how to interpret the data.</li>
</ol>
<p>Reading a configuration value requires a round-trip to the Leap Motion service. The routine used to initiate this round-trip does not block, but it also cannot return the current value in the same call. The requested value will be passed back to your application as an event in LeapPollConnection.</p>
<h2><a class="anchor" id="setconfig"></a>
Writing a config setting</h2>
<p>To write a config value:</p>
<ol type="1">
<li>Open the connection.</li>
<li>Call <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> at least once.</li>
<li>Create a <a class="el" href="a00029.html#a00070" title="A variant data type used to get and set service configuration values. ">LEAP_VARIANT</a> struct, specifying the data type and a value.</li>
<li>Call <a class="el" href="a00036.html#ga8f80709d76bd235949e295055cd3bf9d" title="Causes the client to commit a configuration change to the Leap Motion service. ">LeapSaveConfigValue()</a>, providing the config setting name key and variant structure. LeapC provides a request ID that you can use to correltae the response to the request.</li>
<li>Continue calling <a class="el" href="a00036.html#ga2a8aecad339f0fd339ca22a3e7b389f6" title="Polls the connection for a new event. ">LeapPollConnection()</a> to service the message loop.</li>
<li>When available, a <a class="el" href="a00029.html#a00040" title="The result of a configuration change request. ">LEAP_CONFIG_CHANGE_EVENT</a> message is returned from the message loop. The <a class="el" href="a00029.html#a3f45e7d04fdb18fe4c5184185ef0f3a8" title="The result of the change operation: true on success; false on failure. ">LEAP_CONFIG_CHANGE_EVENT::status</a> field indicates whether the change request was successful. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">LeapC</a></li>
    <li class="footer">Generated on Tue Dec 13 2016 15:48:45 for Leap Motion C API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
