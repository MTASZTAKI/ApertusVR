<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Leap Motion C API: Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="leapmotion-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Leap Motion C API
   &#160;<span id="projectnumber">3.1</span>
   </div>
   <div id="projectbrief">The API to the LeapC library.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>LeapC</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li class="current"><a href="pages.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00004.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Configuration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Leap Motion system stores many options in configuration files. These include most of the user-settable options in the Leap Motion Control Panel, service control settings, and feature control settings. These options can be set at runtime using the <a class="el" href="a00036.html#ga8f80709d76bd235949e295055cd3bf9d" title="Causes the client to commit a configuration change to the Leap Motion service. ">LeapSaveConfigValue()</a> function, when starting the Leap Motion service/daemon as a command line option, or in a JSON-formatted configuration file.</p>
<p>See <a class="el" href="a00024.html#config">Getting and Setting Configuration Values</a> for more information about reading and writing configuration settings.</p>
<p><b>Important</b> These settings affect all running Leap-enabled applications, not just your own. Use caution when changing settings on computers that you don't personally control. Changes could interfere with the operation of the user's other applications.</p>
<h1>Tracking Control Settings</h1>
<p>The tracking settings control the tracking data available to an application.</p>
<ul>
<li><p class="startli"><code>images_mode</code> : integer</p>
<p class="startli">Enables or disables tool tracking. Set to a value of 0 to disable images; set to a value of 2 to enable images.</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
<p class="startli">Note that applications must still invoke the image policy API at runtime to receive images. Simply enabling images on the service is not sufficient.</p>
</li>
<li><p class="startli"><code>image_processing_auto_flip</code> : boolean</p>
<p class="startli">When enabled, the Leap Motion device can be used with either the long side of the device with the green LED facing toward or away from the user. The service detects the orientation and flips the images from the device before analyzing them. When disabled, the images are never flipped and tracking recognizes hands much better when the green LED side of the device is facing the user (or downward in a HMD mount).</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
</li>
</ul>
<h1>Service Control Settings</h1>
<p>The service control settings change how the Leap Motion service (Windows) or daemon (OS X and Linux) operate.</p>
<ul>
<li><p class="startli"><code>robust_mode_enabled</code> : boolean</p>
<p class="startli">Robust mode improves tracking when excessive ambient IR light is present. However, it also lowers the framerate significantly. If the resulting framerate is too low, turning on robust mode might cause worse tracking performance than not enabling it in the first place.</p>
<p class="startli">Robust mode can be enabled in the control panel and by setting the <code>robust_mode_enabled</code> configuration parameter. When enabled, the system enters robust mode when excessive ambient IR light is detected.</p>
<p class="startli">Set this parameter to <code>true</code> to enable; <code>false</code> to disable.</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
</li>
<li><p class="startli"><code>avoid_poor_performance</code> : boolean</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
</li>
<li><p class="startli"><code>background_app_mode arg</code> : integer</p>
<p class="startli">Determines whether applications should receive tracking data when not the focused, foreground application.</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
</li>
<li><p class="startli"><code>cpu_affinity_mask arg</code> : integer</p>
<p class="startli">Processor affinity controls which CPU cores that a process will run on in a multi-core system. You can control the processor affinity of the Leap Motion service using the <code>cpu_affinity_mask</code> configuration parameter. This parameter takes an integer value that is converted into a bitmask that specifies which CPU cores the threads of the service will run on (i.e. 3, which is 0011 in binary, would specify that the threads will run on cores 1 and 2). A value of 0 means that the default OS-defined behavior is unchanged.</p>
<p class="startli">The mask is passed to the Windows SetProcessorAffinityMask() API. This configuration parameter is not supported on other operating systems.</p>
<p class="startli">Changes to this value only take affect when the service is restarted. Generally, it makes sense to set this value in the config.json file or on the command line to LeapSvc:</p>
</li>
</ul>
<pre class="fragment">{
  "configuration": {
    "cpu_affinity_mask": 1,
    "process_niceness": 6
  }
}
</pre><ul>
<li><p class="startli"><code>process_niceness</code> arg : integer</p>
<p class="startli">Thread priority controls the priority of threads spawned by the Leap Motion service. Thread priority is controlled by the <code>process_niceness</code> configuration parameter. Specifying 0 means that the OS default priority is assigined; a value of 1-9 assigns a specific priority (1 = lowest, 9 = highest).</p>
<p class="startli">Changes to this value only take affect when the service is restarted. Generally, it makes sense to set this value in the config.json file or on the command line to LeapSvc. This setting is used on Windows only.</p>
</li>
<li><p class="startli"><code>no_cp_startup</code> : boolean</p>
<p class="startli">Detemines whether the Leap Motion Control panel application launches when the computer boots up. Set to true to suppress automatically launching the control panel; false (the default) to allow.</p>
</li>
<li><p class="startli"><code>auto_check_updates</code> : boolean</p>
<p class="startli">Determines whether the Leap Motion service will automatically check for software updates.</p>
<p class="startli">Since this setting is controlled by the user, you should ask for permission before changing its value.</p>
</li>
<li><p class="startli"><code>auto_install_updates</code> : boolean</p>
<p class="startli">Determines whether the Leap Motion service will automatically install software updates. the auto_check_updates setting must be true for the srvice to discover updates in the first place.</p>
</li>
<li><p class="startli"><code>show_tray_messages</code> : boolean</p>
<p class="startli">Allow notification area messages to be displayed by the service/daemon icon. Set true (the default) to allow; false to supress messages.</p>
<p class="startli">This setting should only be used on computers you control.</p>
</li>
<li><p class="startli"><code>metrics_enabled</code> : boolean</p>
<p class="startli">Allows metric collection.</p>
<p class="startli">This setting should only be used on computers you control.</p>
</li>
</ul>
<h2>Power Saving Options</h2>
<p>Power saving options include the Control Panel Power Saving and Low Resource Mode settings. Power savings for computers running on battery power is on by default, but can be turned off using a configuration parameter.</p>
<p>The power-saving-related configuration parameters are:</p>
<ul>
<li><p class="startli"><code>power_saving_adapter</code> : boolean</p>
<p class="startli">Limits the frame rate to save power, even when the computer is plugged into AC power.</p>
</li>
<li><p class="startli"><code>power_saving_battery</code> : boolean</p>
<p class="startli">Limits the frame rate to save power when the computer is running on battery power.</p>
</li>
<li><p class="startli"><code>low_resource_mode_enabled</code> : boolean</p>
<p class="startli">Limits the frame rate to reduce USB bandwidth.</p>
</li>
</ul>
<p>Setting a value of <code>false</code> for one of these options disables it; a value of <code>true</code> enables it.</p>
<p>The effects of these options are not additive. If you enable both power saving and low resource modes, the resulting framerate will be the minimum value set by either option alone.</p>
<p>The power saving configuration parameters are ignored when images are enabled. (Low resource mode is still effective.)</p>
<h2>WebSocket Options</h2>
<p>The WebSocket options control how programs can connect to the WebSocket server provided by the Leap Motion service.</p>
<p><b>Important</b> If you change these values, other programs on the client computer that expect the default WebSocket settings will fail to connect.</p>
<pre class="fragment">============================ ========== ============= ========================================
Key string                   Value type Default value Purpose
============================ ========== ============= ========================================
``websockets_enabled``       boolean    true          Enables or disables all connections
``websockets_allow_remote``  boolean    false         Allows non-localhost clients to connect
``ws_port``                  integer    6437          Used for connections from HTTP clients
``wss_port``                 integer    6436          Used for connections from HTTPS clients
============================ ========== ============= ========================================
</pre><p>Note that changes to the port numbers do not take effect until the Leap Motion service or daemon restarts. Thus, it only makes sense to set these values on the command line or in the config.json file rather than using the <a class="el" href="a00036.html#ga8f80709d76bd235949e295055cd3bf9d" title="Causes the client to commit a configuration change to the Leap Motion service. ">LeapSaveConfigValue()</a> function:</p>
<pre class="fragment">{
  "configuration": {
    "websockets_enabled": true,
    "websockets_allow_remote": false,
    "ws_port": 51000,
    "wss_port": 51001
  }
}
</pre><h1>Setting Configuration Options</h1>
<p>Configuration prameters can be set on the command line when invoking the Leap Motion service/daemon executable, (<code>LeapSvc</code> on Windows and <code>leapd</code> on OS X and Linux), in a configuration file, and in application code using the LeapC API.</p>
<h2>On the Command Line</h2>
<p>To set configration parameters on the command line, run LeapSvc in a console window, specifying the desired options:</p>
<ul>
<li>Windows:: <pre class="fragment">LeapSvc --option_name=value --another_option=value
</pre></li>
<li>Mac and Linux:: <pre class="fragment">leapd   --option_name=value --another_option=value
</pre></li>
</ul>
<p>Normally LeapSvc or leapd are installed as a service or daemon and run automatically. Before running LeapSvc manually, you must stop the service if it is already running. You can do this using the standard Windows net command (using an admin account):</p>
<ul>
<li>Windows:: <pre class="fragment">net stop LeapService
</pre></li>
<li>Mac:: <pre class="fragment">sudo launchctl unload /Library/LaunchDaemons/com.leapmotion.leapd.plist
</pre></li>
<li>Linux:: <pre class="fragment">sudo service leapd stop
</pre></li>
</ul>
<p>As an example, the following command runs the service with auto-orientation and images turned on:</p>
<ul>
<li>Windows:: <pre class="fragment">LeapSvc  --image_processing_auto_flip=true  --images_mode=2
</pre></li>
<li>Mac and Linux <pre class="fragment">leapd    --image_processing_auto_flip=true  --images_mode=2
</pre></li>
</ul>
<p><b>Important:</b> Command line configuration settings can be ignored when the Leap Motion Control Panel is already running.</p>
<h2>In a Configuration file</h2>
<p>You can add options to a JSON-formatted configuration file. The options file can be specified on the LeapSvc command line using the <code>--config</code> parameter or you can add your options to the standard config file.</p>
<p>A configuration file must be valid JSON. A configuration file specifying the options discussed in this document looks like:</p>
<pre class="fragment">{
  "configuration": {
    "cpu_affinity_mask": 3,
    "images_mode": 2,
    "power_saving_adapter": false,
    "power_saving_battery": false,
    "process_niceness": 5,
    "robust_mode_enabled": false,
    "tracking_hand_enabled": true
  }
}
</pre><p>On the command line, you can specify the config file as follows: </p><pre class="fragment">LeapSvc --config=/path/to/config.json

leapd --config=/path/to/config.json
</pre><p>The Leap Motion system also maintains two standard JSON-formatted configuration files. One is used by the service/daemon, the other is used by the Leap Motion Control Panel application. When both the service and the control panel are running, shared settings are kept in sync. Otherwise, the control panel settings take precedence. In other words, if the service/daemon is already running when the control panel launches, settings are updated to match those found in the control panel configuration file. If the control panel is running when the service/daemon starts, the control panel settings still take precedence over any found in the service configuration file &ndash; or set on the command line.</p>
<p>Editing these configuration files while the service/daemon or control panel is running does not change the current runtime setting. We recommend quitting the control panel and shutting down the service/daemon before making changes.</p>
<p>The configuration files are named <code>config.json</code> and can be found in the following locations:</p>
<pre class="fragment">======= ================================================= ==========================================
OS      Control Panel Config Location                     Service/Daemon Config Location
======= ================================================= ==========================================
Android /sdcard/user/Leap\\ Motion                        /sdcard/Leap\\ Motion
Linux   $HOME/Leap\\ Motion                               /var/Leap\\ Motion
OS X    $HOME/Library/Application\\ Support/Leap\\ Motion /Library/Application\\ Support/Leap\\ Motion
Windows %AppData%/Leap Motion                             %ProgramData%/Leap Motion
======= ================================================= ==========================================
</pre><p>Note that some of these folders are located within hidden directories. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">LeapC</a></li>
    <li class="footer">Generated on Tue Dec 13 2016 15:48:45 for Leap Motion C API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
