


  
  
 
  
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Autorigging Hand Models &mdash; Leap Motion Java SDK v3.1 documentation</title>
    
    <link rel="stylesheet" href="../../cpp/_static/bootstrap-3.0.0/css/documentation-bundle.1471552333.css" type="text/css" />
    
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
      <script type="text/javascript" src="../../cpp/_static/bootstrap-3.0.0/js/documentation-bundle.1471552333.js"></script>
    <link rel="top" title="Leap Motion Java SDK v3.1 documentation" href="../index.html" />
<script type="text/javascript" src="/assets/standalone-header.js?r9"></script>
<link rel="stylesheet" href="/assets/standalone-header.css?r9" type="text/css" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31536531-1']);
  _gaq.push(['_setDomainName', 'leapmotion.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

 

<script>

    function getQueryValue(variable)
    {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }
        var relPath = "../../";

    var requestedAPI = getQueryValue("proglang");
    if(requestedAPI == "current") requestedAPI = localStorage["currentAPI"];
    var pageAPI = 'java';
    var hasAPI = {};
    hasAPI.unity = true;

    if(requestedAPI && (requestedAPI != pageAPI))
    {
        if(pageAPI != 'none'){
            var redirectedLocation = relPath + 'java/unity/Unity_AutoRigging.html';
            if( requestedAPI == 'cpp' && hasAPI.cpp){
                redirectedLocation = relPath + "cpp/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'csharp' && hasAPI.csharp){
                redirectedLocation = relPath + "csharp/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'unity' && hasAPI.unity){
                redirectedLocation = relPath + "unity/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'objc' && hasAPI.objc){
                redirectedLocation = relPath + "objc/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'java' && hasAPI.java) {
                redirectedLocation = relPath + "java/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'javascript' && hasAPI.javascript){
                redirectedLocation = relPath + "javascript/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'python' && hasAPI.python){
                redirectedLocation = relPath + "python/unity/Unity_AutoRigging.html";
            }
            else if( requestedAPI == 'unreal' && hasAPI.unreal) {
                redirectedLocation = relPath + "unreal/unity/Unity_AutoRigging.html";
            } else {

                    if( requestedAPI == 'cpp'){
                        redirectedLocation = relPath + "cpp/index.html?proglang=cpp";
                    }
                    else if( requestedAPI == 'csharp'){
                        redirectedLocation = relPath + "csharp/index.html?proglang=csharp";
                    }
                    else if( requestedAPI == 'unity'){
                        redirectedLocation = relPath + "unity/index.html?proglang=unity";
                    }
                    else if( requestedAPI == 'objc'){
                        redirectedLocation = relPath + "objc/index.html?proglang=objc";
                    }
                    else if( requestedAPI == 'java') {
                        redirectedLocation = relPath + "java/index.html?proglang=java";
                    }
                    else if( requestedAPI == 'javascript'){
                        redirectedLocation = relPath + "javascript/index.html?proglang=javascript";
                    }
                    else if( requestedAPI == 'python'){
                        redirectedLocation = relPath + "python/index.html?proglang=python";
                    }
                    else if( requestedAPI == 'unreal') {
                        redirectedLocation = relPath + "unreal/index.html?proglang=unreal";
                    } else {
                        redirectedLocation = relPath + "index.html";
                    }
            }

            //Guard against redirecting to the same page (infinitely)
            if(relPath + 'java/unity/Unity_AutoRigging.html' != redirectedLocation) window.location.replace(redirectedLocation);
        }
    }

</script>

<script>
window.addEventListener('keyup', handleKeyInput);
function handleKeyInput(e)
{
    var code;
    if (!e) var e = window.event;
    if (e.keyCode) code = e.keyCode;
    else if (e.which) code = e.which;
    var character = String.fromCharCode(code);
    if( character == "J" & e.altKey){    }
    else if( character == "K" & e.altKey){
    }

}
</script>


  </head>
  <body role="document">

<div class="developer-portal-styles">
  <header class="navbar navbar-static-top developer-navbar header beta-header">
    <nav class="container pr">
      <a class="logo-link pull-left" href="/">
        <img alt="Leap Motion Developers" class="media-object pull-left white-background" src="../_static/logo.png" />
      </a>
      <span class="inline-block hidden-phone developer-logo-text">
        <div class="text">
          <a href="/">
            <span class="more-than-1199">Developer Portal</span>

          </a>
        </div>
      </span>

      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <!-- Everything within here will be hidden at 940px or less, accessible via a button. -->
      <div class="nav-collapse">
        <ul class="nav header-navigation developer-links">
          <li class="external-link"><a href="https://developer.leapmotion.com/features">What's new</a> </li>
          <li class="external-link"><a href="https://developer.leapmotion.com/downloads/skeletal-beta" class="">Getting Started</a></li>
          <li><a class="active" href="#" class="">Documentation</a></li>
          <li class="external-link"> <a href="https://developer.leapmotion.com/gallery" class="">Examples</a> </li>
          <li class="external-link"> <a href="https://www.leapmotion.com/blog/category/labs/" class="" target="_blank">Blog <i class='fa fa-external-link'></i></a> </li>
          <li class="external-link"> <a href="https://community.leapmotion.com/category/beta" class="" target="_blank">Community <i class='fa fa-external-link'></i></a> </li>
        </ul>
      </div>

    </nav>
  </header>
</div>
<section class="main-wrap">
  <div data-swiftype-index="true">
    <div class="second_navigation">
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            
              

<ul>
  <li>
      <a href="../../javascript/index.html?proglang=javascript" onclick="localStorage['currentAPI'] = 'javascript'">JavaScript</a>
    
  </li>
  <li>
      <a href="../../unity/unity/Unity_AutoRigging.html?proglang=unity" onclick="localStorage['currentAPI'] = 'unity'">Unity</a>
    
  </li>
  <li>
      <a href="../../csharp/index.html?proglang=csharp" onclick="localStorage['currentAPI'] = 'csharp'">C#</a>
    
  </li>
  <li>
      <a href="../../cpp/index.html?proglang=cpp" onclick="localStorage['currentAPI'] = 'cpp'">C++</a>
    
  </li>
  <li>
      Java
    
  </li>
  <li>
      <a href="../../python/index.html?proglang=python" onclick="localStorage['currentAPI'] = 'python'">Python</a>
    
  </li>
  <li>
      <a href="../../objc/index.html?proglang=objc" onclick="localStorage['currentAPI'] = 'objc'">Objective-C</a>
    
  </li>
  <li>
      <a href="../../unreal/index.html?proglang=unreal" onclick="localStorage['currentAPI'] = 'unreal'">Unreal</a>
    
  </li>
</ul>
            
          </div>
          <div class="col-md-4 search">
            
              <script>
function storeThisPage(){
    sessionStorage["pageBeforeSearch"] = window.location;
    return true;
}
function doneWithSearch(){
    var storedPage = sessionStorage["pageBeforeSearch"];
    if(storedPage){
        window.location = storedPage;
    } else {
        window.location = "index.html"; //fallback
    }
    return false;
}
</script>
<div  style="margin-top:-4px">
<ul style="display:inline; white-space:nowrap"><li>
<form class="navbar-form" action="../search.html" method="get" onsubmit="storeThisPage()">
 <div class="form-group">
  <input type="search" results="5" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form></li>
</ul>
</div>
            
          </div>
        </div>
      </div>
    </div>
    <script>
        //Remove dev portal header and footer when viewing from file system
       if(window.location.protocol == 'file:'){
            var navNode = document.querySelector(".developer-links");
            navNode.parentNode.removeChild(navNode);
        }

    </script>


<div id="wrap" data-spy="scroll" data-target="#sidebar">
  <div class="container">
    <div class="row">
      <div class="col-md-9 pull-right">
        <!-- 
 
<span id="breadcrumbs">
  <a href="../index.html">Home</a>&raquo;
  Autorigging Hand Models
</span> -->
        
  <div class="section" id="autorigging-hand-models">
<h1>Autorigging Hand Models<a class="headerlink" href="#autorigging-hand-models" title="Permalink to this headline">¶</a></h1>
<p>The LeapHandAutorig Monobehavior script acts as a quarterback for an array of scripts and methods which comprise the rigged hands setup process. After autorigging, the LeapHands Autorig Inspector console acts as a central control panel to push values to the other Leap Motion rigging scripts. This allows you to test the model quickly and set certain values centrally, instead of digging through the hierarchy to set values in all the scripts manually.</p>
<p>Autorigging can act on a variety of FBX assets, and works in two different ways, depending on whether the asset has a Unity Mecanim Humanoid definition. If so, then LeapHandsAutorig finds and assign joints based on this mapping. If not, then LeapHandsAutorig searches the hierarchy below its Transform by a list of names typical of common character rigging practices.</p>
<p>For additional background information on autorigging and video tutorials, see:</p>
<ul class="simple">
<li><a class="reference external" href="http://blog.leapmotion.com/unlocking-new-hands-unity-core-assets-part/">Unlocking New Hands</a></li>
<li><a class="reference external" href="http://blog.leapmotion.com/hands-module-2-0-bring-your-hand-designs-to-life-in-two-minutes-or-less/">Bringing Hand Designs to Life</a></li>
</ul>
<div class="section" id="autorigging-properties">
<h2>AutoRigging Properties<a class="headerlink" href="#autorigging-properties" title="Permalink to this headline">¶</a></h2>
<p>The autorigging script exposes the following properties. Most of these properties are set automatically, but the following options can be set when needed or desired:</p>
<ul class="simple">
<li>Use Metacarpals &#8211; Some, but not all, skeletons contain metacrapal bones for the hands. Check this option before autorigging if the current model uses metacarpals.</li>
<li>Set Editor Leap Pose &#8211; Whether to apply the default pose to the hands. This property can be changed at any time.</li>
<li>Flip Palms &#8211; Whether to reverse the palm normals. This property can be changed at any time.</li>
</ul>
<p>The following properties are set automatically when you press the Autorig button. After autorigging, make sure that all of these properties have valid values. If autorigging fails entirely, the typical cause is that the model does not have a humanoid Mecanim rig and the names assigned to the bones do not match the names that the autorigging script is looking for.</p>
<ul class="simple">
<li>Animator for Mapping &#8211; The animator component in which the auto-rigging script looks for the Mecanim mapping. This property will be set automatically when you press the AutoRig button.</li>
<li>Model Group Name &#8211; The group in the hand pool to which the riggedhands are assigned. Set automatically (and overrides any manual setting).</li>
<li>Rigged Hand Left/Right &#8211; The RiggedHand scripts attached to each hand transform. Set automatically (and overrides any manual setting).</li>
<li>Hand Transition Behavior Left/Right &#8211; The assigned transition. Set automatically (and overrides any manual setting).</li>
<li>Rigged Finger (several)&#8211; The RiggedFinger scripts attached to the bone at the root of each finger in the skeleton. Set automatically (and overrides any manual setting).</li>
<li>Model Finger Pointing Left/Right &#8211; The pointing direction of the finger bones. These are set automatically, but in rare cases, you may need to override the calculated value.</li>
<li>Model Palm Facing Left/Right &#8211; The palm normal direction. These are set automatically, but in rare cases, you may need to override the calculated value.</li>
</ul>
</div>
<div class="section" id="preparing-a-hand-model">
<h2>Preparing A Hand Model<a class="headerlink" href="#preparing-a-hand-model" title="Permalink to this headline">¶</a></h2>
<p>After importing the model as a Unity asset, drag it into a test scene. This test scene should contain the LMHeadMountedRig.</p>
<p>Generally, there are two ways that hand models are organized when you import them: either as separate models for each hand or as a combined model containing both hands.</p>
<p>When left and right hand models are imported separately, the models generally only contain the bones specific to the hand, rather than a full human skeleton. Unity typically assigns the <strong>Generic</strong> Mechanim rig. This means that the autorigging script must use the names assigned to the bones to map the Leap Motion bones to the model&#8217;s bones. The names must contain the following strings to be found:</p>
<blockquote>
<div><ul class="simple">
<li>Right hand &#8211; &#8220;right&#8221; and &#8220;_r&#8221;</li>
<li>Left hand &#8211; &#8220;left&#8221; and &#8220;_l&#8221;</li>
<li>Palm &#8211; &#8220;palm&#8221;</li>
<li>Thumb &#8211; &#8220;thumb&#8221; and &#8220;tmb&#8221;</li>
<li>Index finger &#8211; &#8220;index&#8221; and &#8220;idx&#8221;</li>
<li>Middle finger &#8211; &#8220;middle&#8221; and &#8220;mid&#8221;</li>
<li>Ring finger &#8211; &#8220;ring&#8221;</li>
<li>Pinky &#8211; &#8220;pinky&#8221; and &#8220;pin&#8221;</li>
</ul>
</div></blockquote>
<p>If these strings do not appear in the bone names, you can rename the game objects in the models skeleton hierarchy and try autorigging again.</p>
<p>When both the left and right hands are included in a single model, often the entire human skeleton is also included. In such a case Unity can usually assign the <strong>Humanoid</strong> Mechanim rig to the model. The autorigging script then uses the Mechanim mapping to identify the bones. In cases where Unity cannot automatically setup the mapping, you can often configure the Avatar Definition manually &#8211; mapping the arm and hand bones is obviously the most crucial to enabling autorigging.</p>
<p>To set the bone mapping manually:</p>
<ol class="arabic simple">
<li>Select the model in the scene hierarchy.</li>
<li>In the Inspector, click the Model Select button.</li>
<li>Choose the Rig tab on the model Inspector.</li>
<li>Set Animation Type to Humanoid.</li>
<li>Set Avatar Definition to Create From This Model.</li>
<li>Click the Configure button.</li>
<li>Map the bone transforms of your model to the Mechanim bone slots.</li>
<li>Click Done.</li>
<li>Click Apply.</li>
</ol>
</div>
<div class="section" id="autorigging-models">
<h2>Autorigging Models<a class="headerlink" href="#autorigging-models" title="Permalink to this headline">¶</a></h2>
<p>If the left and right hands are separate models, add both hand models to your test scene as children of a common game object. Add the LeapHandsAutoRig to this parent object. If both hands are part of the same model, add the LeapHandsAutoRig script to the game object in the model that contains the Unity Animator component. This is typically the top-level game object of the model.</p>
<p>Next, click the AutoRig button.</p>
<p>There are several ways to verify whether various parts of the autorigging were successful. Start by seeing if the previously empty fields in the LeapHandsAutorig component now have references in them. If these fields have not been set correctly, verify that a valid and correct Mecanim humanoid skeleton rig has been configured for the hand models, or that the bone names contain the required strings. If the autorigging script is placed on the wrong game object, then autoriging will fail.</p>
<p>Then, to verify that the hands are added to the HandPool and ready to be driven, select the LMHeadMountedRig/CenterEyeAnchor/LeapSpace/LeapHandController transform and check for the GraphicsHands ModelGroup in the HandPool component.</p>
<p>You can also verify that the hands have been setup correctly by checking the Set Editor Leap Pose checkbox in the LeapHandsAutorig’s Inspector. This will pose the hands in the Leap editor pose. When the autorigging is run, snapshots of the hands’ hierarchies are stored. Then, if you uncheck that checkbox, the model is returned to this stored pose. If the pose looks wrong, try using the flip palms option. If the fingers twist as a fist is made, it is possible that the axis of rotation of the bones is angled rather than straight out of the side of the finger. The autorigging scripts do not work with arbitrary joint orientations.</p>
<p>Finally, drag the model, or the common parent of the model to the project panel to create a prefab that you can use in other scenes. When you add these prefabs to a new scenes, the game objects containing the RiggedHand components must be added to the Hand Pool in that scene&#8217;s LeapHandController object.</p>
</div>
</div>


           <!-- get_disqus_sso -->
      </div>
      <div id="sidebar" class="col-md-3">
        <div class="well-sidebar" data-offset-top="188">
          <ul>
            <li><a href="../index.html" title="Home">Java Docs (v3.1)</a></li>
          </ul><ul>
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Overview.html">API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practices/Leap_Practices.html">Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Guides.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devguide/Leap_Guides2.html">Using the Tracking API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/Leap_Classes.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supplements/Leap_Supplements.html">Appendices</a></li>
</ul>


        </div>
      </div>
        
    </div>
  </div>
</div>
<!--

<div class="ribbon">
    <p>Java</p>
</div>


<footer>
  <div id="footer" class="container">
    <div class="container">
      <div class="copyright">
        <span>Copyright &copy; 2012 - 2016, Leap Motion, Inc.</span>
      </div>
    </div>
  </div>
</footer>
  </body>
</html>